#:kivy 2.3.1

<ModbusPopup>:
    title: "Configurações do MODBUS"
    size_hint_y: None
    size_hint_x: 0.4
    height: 200
    BoxLayout:
        id: layout
        orientation: 'vertical'
        GridLayout:
            cols: 2
            rows: 2
            Label:
                text: "IP"
                font_size: 14
            TextInput:
                id: txt_ip
                text: "127.0.0.1"
                font_size: 14
                halign: 'center'
                valign: 'middle'
            Label:
                text: "Porta"
                font_size: 14
            TextInput:
                id: txt_porta
                text: "502"
                font_size: 14
                halign: 'center'
                valign: 'middle'
        BoxLayout:
            orientation: 'horizontal'
            Button:
                size_hint_y: None
                height: 40
                text: "Conectar"
                on_release:
                    root.clearInfo()
                    app.root.startDataRead()
            Button:
                size_hint_y: None
                height: 40
                text: "Fechar"
                on_release:
                    root.dismiss()

<ScanPopup>:
    title: "Configuração ScanTime"
    size_hint_y: None
    size_hint_x: 0.4
    height: 150
    BoxLayout:
        id: layout
        orientation: 'vertical'
        GridLayout:
            cols: 2
            rows: 1
            Label:
                text: "ScanTime [ms]"
                font_size: 14
            TextInput:
                id: txt_st
                font_size: 14
                halign: 'center'
                valign: 'middle'
        BoxLayout:
            orientation: 'horizontal'
            Button:
                size_hint_y: None
                height: 40
                text: "Configurar"
                on_release: 
                    app.root._scan_time = int(txt_st.text)
            Button:
                size_hint_y: None
                height: 40
                text: "Fechar"
                on_release:
                    root.dismiss()

<MedidoresPopup>:
    title: "Medidores da Planta"
    BoxLayout:
        orientation:'vertical'
        GridLayout:
            cols: 2
            rows: 12
            size_hint: (1,0.8)       
            Label:
                text: "Corrente R"
                bold: True
            Label:
                id:corrente_r
                text: '-.-A'
            Label:
                text: "Corrente S"
                bold: True
            Label:
                id:corrente_s
                text: '-.-A'
            Label:
                text: "Corrente T"
                bold: True
            Label:
                id:corrente_t
                text: '-.-A'
            Label:
                text: "Potência Ativa Total"
                bold: True
            Label:
                id:pot_a_total
                text: '-.-W'
            Label:
                text: "Frequência Motor"
                bold: True
            Label:
                id:frequencia_motor
                text: '-.-Hz'
            Label:
                text: "Temperatura Enrolamento R"
                bold: True
            Label:
                id:temperatura_enrolamento_r
                text: '-.-ºC'
            Label:
                text: "Temperatura Enrolamento S"
                bold: True
            Label:
                id:temperatura_enrolamento_s
                text: '-.-ºC'
            Label:
                text: "Temperatura Enrolamento T"
                bold: True
            Label:
                id:temperatura_enrolamento_t
                text: '-.-ºC'
            Label:
                text: "Fator Potência"
                bold: True
            Label:
                id:fat_pot
                text: '-.-'
            Label:
                text: "Fator Potência Comp"
                bold: True
            Label:
                id:fat_pot_comp
                text: '-.-'
            Label:
                text: "Frequência do Motor"
                bold: True
            Label:
                id:frequencia_motor
                text: '-.-Hz'
            Label:
                text: "Frequência do Compressor"
                bold: True
            Label:
                id:frequencia_compressor
                text: '-.-Hz'

        Button:
            size_hint_y: None
            height: 40
            text: "Fechar"
            on_release:
                root.dismiss()       

<LabelCheckBoxGraficosMotor>:
    orientation:'horizontal'
    size_hint: (0.1,1)
    CheckBox:
        id: checkbox
        on_active: app.root._graficoMotorPopup.ids.graph.setMaxPoints(int(label1.text),0 if app.root is not None else None)
    Label:
        id: label1
<MotoresPopup>:
    BoxLayout:
        orientation:'vertical'
        BoxLayout:
            orientation:'horizontal'
            Button:
                size_hint_y: None
                height: 40
                text: "Ativar Ventilador"
                on_release:
                    
            Button:
                size_hint_y: None
                height: 40
                text: "Fechar"
                on_release:
                    root.dismiss()



<DadosPopup>:
    BoxLayout:
        orientation: 'horizontal'
        size_hint: (1,0.1)
        Label:
            text: 'Timestamp inicial \r\n (DD/MM/AAAA HH:MM:SS)'
            halign: 'center'
            markup: True
        TextInput:
            id: txt_init_time
            size_hint: (1,0.8)
            halign: 'center'
            valing: 'middle'
            multiline: False
        Label:
            text: 'Timestamp final \r\n (DD/MM/AAAA HH:MM:SS)'
            halign: 'center'
            markup: True
        TextInput:
            id: txt_final_time
            size_hint: (1,0.8)
            halign: 'center'
            valing: 'middle'
            multiline: False
        Button:
            size_hint_y: None
            height: 40
            text: "Fechar"
            on_release:
                root.dismiss()

<LabelCheckBoxGraficosT1>:
    orientation:'horizontal'
    size_hint: (0.1,1)
    CheckBox:
        id: checkbox
        on_active: app.root._graficoTit01Popup.ids.graph.setMaxPoints(int(label2.text),0 if app.root is not None else None)
    Label:
        id: label2

<LabelCheckBoxGraficosAr>:
    orientation:'horizontal'
    size_hint: (0.1,1)
    CheckBox:
        id: checkbox
        on_active: app.root._graficoArSaiPopup.ids.graph.setMaxPoints(int(label3.text),0 if app.root is not None else None)
    Label:
        id: label3

<LabelCheckBoxGraficosT2>:
    orientation:'horizontal'
    size_hint: (0.1,1)
    CheckBox:
        id: checkbox
        on_active: app.root._graficoTit02Popup.ids.graph.setMaxPoints(int(label4.text),0 if app.root is not None else None)
    Label:
        id: label4

<LabelCheckBoxGraficosP1>:
    orientation:'horizontal'
    size_hint: (0.1,1)
    CheckBox:
        id: checkbox
        on_active: app.root._graficoPit01Popup.ids.graph.setMaxPoints(int(label5.text),0 if app.root is not None else None)
    Label:
        id: label5

<LabelCheckBoxGraficosP2>:
    orientation:'horizontal'
    size_hint: (0.1,1)
    CheckBox:
        id: checkbox
        on_active: app.root._graficoPit02Popup.ids.graph.setMaxPoints(int(label6.text),0 if app.root is not None else None)
    Label:
        id: label6

<LabelCheckBoxGraficosP3>:
    orientation:'horizontal'
    size_hint: (0.1,1)
    CheckBox:
        id: checkbox
        on_active: app.root._graficoPit03Popup.ids.graph.setMaxPoints(int(label7.text),0 if app.root is not None else None)
    Label:
        id: label7


<GraficoMotorPopup>:
    title: 'Gráfico da Temperatura da Carcaça do Motor'
    BoxLayout:
        orientation:'vertical'
        TimeSeriesGraph:
            id: graph
            xlabel: 'Horário'
            ylabel: 'Temperatura [°C]'
            label_options: {'color': [0, 0, 0, 1], 'bold': True}
            background_color: 0.3,0.3,0.3
            x_ticks_minor: 1
            x_ticks_major: 5
            y_ticks_major: 5
            x_grid_label: True
            y_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin: 0
            ymin: 0
            ymax: 120
        BoxLayout:
            orientation:'horizontal'
            size_hint: (1,0.05)
            BoxLayout:
                orientation:'horizontal'
                size_hint: (0.5,1)
                Label:
                    size_hint: (0.3,1)
                    text: "Número de pontos do gráfico:"
                LabelCheckBoxGraficosMotor:
                    id:mp20
                    on_kv_post:
                        self.ids.label1.text = '20'
                        self.ids.checkbox.group = 'cb_group'
                LabelCheckBoxGraficosMotor:
                    id:mp50
                    on_kv_post:
                        self.ids.label1.text = '50'
                        self.ids.checkbox.group = 'cb_group'
                LabelCheckBoxGraficosMotor:
                    id:mp100
                    on_kv_post:
                        self.ids.label1.text = '100'
                        self.ids.checkbox.group = 'cb_group'                    
            Button:
                size_hint_y: None
                height: 30
                size_hint_x: None
                width: 100
                pos_hint: {'bottom':1, 'right':1}
                text: "Fechar"
                on_release:
                    root.dismiss()

<GraficoTit01Popup>:
    title: 'Gráfico da Temperatura do Cano Azul'
    BoxLayout:
        orientation: 'vertical'
        TimeSeriesGraph:
            id: graph
            xlabel: 'Horário'
            ylabel: 'Temperatura [°C]'
            label_options: {'color': [0, 0, 0, 1], 'bold': True}
            background_color: 0.3, 0.3, 0.3
            x_ticks_minor: 1
            x_ticks_major: 5
            y_ticks_major: 5
            x_grid_label: True
            y_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin: 0
            ymin: 0
            ymax: 50
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.05)
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (0.5, 1)
                Label:
                    size_hint: (0.3, 1)
                    text: "Número de pontos do gráfico:"
                LabelCheckBoxGraficosT1:
                    id: mp20
                    on_kv_post:
                        self.ids.label2.text = '20'
                        self.ids.checkbox.group = 'cb_group2'
                LabelCheckBoxGraficosT1:
                    id: mp50
                    on_kv_post:
                        self.ids.label2.text = '50'
                        self.ids.checkbox.group = 'cb_group2'
                LabelCheckBoxGraficosT1:
                    id: mp100
                    on_kv_post:
                        self.ids.label2.text = '100'
                        self.ids.checkbox.group = 'cb_group2'
            Button:
                size_hint_y: None
                height: 30
                size_hint_x: None
                width: 100
                pos_hint: {'bottom': 1, 'right': 1}
                text: "Fechar"
                on_release:
                    root.dismiss()

<GraficoArSaiPopup>:
    title: 'Gráfico da Temperatura do Ar de Saída'
    BoxLayout:
        orientation: 'vertical'
        TimeSeriesGraph:
            id: graph
            xlabel: 'Horário'
            ylabel: 'Temperatura [°C]'
            label_options: {'color': [0, 0, 0, 1], 'bold': True}
            background_color: 0.3, 0.3, 0.3
            x_ticks_minor: 1
            x_ticks_major: 5
            y_ticks_major: 5
            x_grid_label: True
            y_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin: 0
            ymin: 0
            ymax: 50
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.05)
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (0.5, 1)
                Label:
                    size_hint: (0.3, 1)
                    text: "Número de pontos do gráfico:"
                LabelCheckBoxGraficosAr:
                    id: mp20
                    on_kv_post:
                        self.ids.label3.text = '20'
                        self.ids.checkbox.group = 'cb_group3'
                LabelCheckBoxGraficosAr:
                    id: mp50
                    on_kv_post:
                        self.ids.label3.text = '50'
                        self.ids.checkbox.group = 'cb_group3'
                LabelCheckBoxGraficosAr:
                    id: mp100
                    on_kv_post:
                        self.ids.label3.text = '100'
                        self.ids.checkbox.group = 'cb_group3'
            Button:
                size_hint_y: None
                height: 30
                size_hint_x: None
                width: 100
                pos_hint: {'bottom': 1, 'right': 1}
                text: "Fechar"
                on_release:
                    root.dismiss()

<GraficoTit02Popup>:
    title: 'Gráfico da Temperatura do Cano Vermelho'
    BoxLayout:
        orientation: 'vertical'
        TimeSeriesGraph:
            id: graph
            xlabel: 'Horário'
            ylabel: 'Temperatura [°C]'
            label_options: {'color': [0, 0, 0, 1], 'bold': True}
            background_color: 0.3, 0.3, 0.3
            x_ticks_minor: 1
            x_ticks_major: 5
            y_ticks_major: 5
            x_grid_label: True
            y_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin: 0
            ymin: 0
            ymax: 50
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.05)
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (0.5, 1)
                Label:
                    size_hint: (0.3, 1)
                    text: "Número de pontos do gráfico:"
                LabelCheckBoxGraficosT2:
                    id: mp20
                    on_kv_post:
                        self.ids.label4.text = '20'
                        self.ids.checkbox.group = 'cb_group4'
                LabelCheckBoxGraficosT2:
                    id: mp50
                    on_kv_post:
                        self.ids.label4.text = '50'
                        self.ids.checkbox.group = 'cb_group4'
                LabelCheckBoxGraficosT2:
                    id: mp100
                    on_kv_post:
                        self.ids.label4.text = '100'
                        self.ids.checkbox.group = 'cb_group4'
            Button:
                size_hint_y: None
                height: 30
                size_hint_x: None
                width: 100
                pos_hint: {'bottom': 1, 'right': 1}
                text: "Fechar"
                on_release:
                    root.dismiss()

<GraficoPit02Popup>:
    title: 'Gráfico da Pressão no Cano Vermelho'
    BoxLayout:
        orientation: 'vertical'
        TimeSeriesGraph:
            id: graph
            xlabel: 'Horário'
            ylabel: 'Temperatura [°C]'
            label_options: {'color': [0, 0, 0, 1], 'bold': True}
            background_color: 0.3, 0.3, 0.3
            x_ticks_minor: 1
            x_ticks_major: 5
            y_ticks_major: 2
            x_grid_label: True
            y_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin: 0
            ymin: 0
            ymax: 20
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.05)
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (0.5, 1)
                Label:
                    size_hint: (0.3, 1)
                    text: "Número de pontos do gráfico:"
                LabelCheckBoxGraficosP2:
                    id: mp20
                    on_kv_post:
                        self.ids.label6.text = '20'
                        self.ids.checkbox.group = 'cb_group2'
                LabelCheckBoxGraficosP2:
                    id: mp50
                    on_kv_post:
                        self.ids.label6.text = '50'
                        self.ids.checkbox.group = 'cb_group2'
                LabelCheckBoxGraficosP2:
                    id: mp100
                    on_kv_post:
                        self.ids.label6.text = '100'
                        self.ids.checkbox.group = 'cb_group2'
            Button:
                size_hint_y: None
                height: 30
                size_hint_x: None
                width: 100
                pos_hint: {'bottom': 1, 'right': 1}
                text: "Fechar"
                on_release:
                    root.dismiss()

<GraficoPit01Popup>:
    title: 'Gráfico da Pressão no Cano Azul'
    BoxLayout:
        orientation: 'vertical'
        TimeSeriesGraph:
            id: graph
            xlabel: 'Horário'
            ylabel: 'Temperatura [°C]'
            label_options: {'color': [0, 0, 0, 1], 'bold': True}
            background_color: 0.3, 0.3, 0.3
            x_ticks_minor: 1
            x_ticks_major: 5
            y_ticks_major: 2
            x_grid_label: True
            y_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin: 0
            ymin: 0
            ymax: 50
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.05)
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (0.5, 1)
                Label:
                    size_hint: (0.3, 1)
                    text: "Número de pontos do gráfico:"
                LabelCheckBoxGraficosP1:
                    id: mp20
                    on_kv_post:
                        self.ids.label5.text = '20'
                        self.ids.checkbox.group = 'cb_group3'
                LabelCheckBoxGraficosP1:
                    id: mp50
                    on_kv_post:
                        self.ids.label5.text = '50'
                        self.ids.checkbox.group = 'cb_group3'
                LabelCheckBoxGraficosP1:
                    id: mp100
                    on_kv_post:
                        self.ids.label5.text = '100'
                        self.ids.checkbox.group = 'cb_group3'
            Button:
                size_hint_y: None
                height: 30
                size_hint_x: None
                width: 100
                pos_hint: {'bottom': 1, 'right': 1}
                text: "Fechar"
                on_release:
                    root.dismiss()

<GraficoPit03Popup>:
    title: 'Gráfico da Pressão na câmara de entrada de ar do ventilador'
    BoxLayout:
        orientation: 'vertical'
        TimeSeriesGraph:
            id: graph
            xlabel: 'Horário'
            ylabel: 'Temperatura [°C]'
            label_options: {'color': [0, 0, 0, 1], 'bold': True}
            background_color: 0.3, 0.3, 0.3
            x_ticks_minor: 1
            x_ticks_major: 5
            y_ticks_major: 2
            x_grid_label: True
            y_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin: 0
            ymin: 0
            ymax: 20
        BoxLayout:
            orientation: 'horizontal'
            size_hint: (1, 0.05)
            BoxLayout:
                orientation: 'horizontal'
                size_hint: (0.5, 1)
                Label:
                    size_hint: (0.3, 1)
                    text: "Número de pontos do gráfico:"
                LabelCheckBoxGraficosP3:
                    id: mp20
                    on_kv_post:
                        self.ids.label7.text = '20'
                        self.ids.checkbox.group = 'cb_group4'
                LabelCheckBoxGraficosP3:
                    id: mp50
                    on_kv_post:
                        self.ids.label7.text = '50'
                        self.ids.checkbox.group = 'cb_group4'
                LabelCheckBoxGraficosP3:
                    id: mp100
                    on_kv_post:
                        self.ids.label7.text = '100'
                        self.ids.checkbox.group = 'cb_group4'
            Button:
                size_hint_y: None
                height: 30
                size_hint_x: None
                width: 100
                pos_hint: {'bottom': 1, 'right': 1}
                text: "Fechar"
                on_release:
                    root.dismiss()

<HistGraphPopup>:
    title: "Histórico de dados"
    BoxLayout:
        orientation:'vertical'
        TimeSeriesGraph:
            id: graph
            xlabel: 'Horário'
            ylabel: 'Temperatura [°C]'
            label_options: {'color': [0, 0, 0, 1], 'bold': True}
            background_color: 0.3, 0.3, 0.3
            x_ticks_minor: 1
            x_ticks_major: 5
            y_ticks_major: 5
            x_grid_label: True
            y_grid_label: True
            padding: 5
            x_grid: True
            y_grid: True
            xmin: 0
            ymin: 0
            ymax: 70
        BoxLayout:
            id: sensores
            orientation: 'horizontal'
            size_hint: (1,0.1)
        BoxLayout:
            orientation:'horizontal'
            size_hint: (1,0.1)
            Label:
                text:'Timestamp inicial \r\n [size=12] (DD/MM/AAAA HH:MM:SS)'
                haling: 'center'
                markup: True
            TextInput:
                id: txt_init_time
                size_hint: (1,0.8)
                haling: 'center'
                valing: 'middle'
                multiline: False
            Label:
                text:'Timestamp final \r\n [size=12] (DD/MM/AAAA HH:MM:SS)'
                haling: 'center'
                markup: True
            TextInput:
                id: txt_final_time
                size_hint: (1,0.8)
                haling: 'center'
                valing: 'middle'
                multiline: False
            Button:
                text:"Fechar"
                size_hint: (1,0.8)
                on_release: root.dismiss()

<LabeledCheckBoxHistGraph>:
    orientation:'horizontal'
    size_hint: (0.05,1)
    CheckBox:
        id:checkbox
        on_active: app.root.BuscaComKivy()
    Label:
        id: label
        font_size: 12
        bold: True